% --- PWR MOX/UOX lattice (SCALE-style input format) ---------

% --- Problem title:

set title "MOX assembly in UOX lattice"

% --- Cross section library file path:

set acelib "sss_jeff311u.xsdata"

% ------------------------------------------------------------

% --- Material definitions ("comp block"):

% --- UOX fuel, initial enrichment 3.25%, burnup 25 MWd/kgU:

mat UO2      6.585000E-02
92235.09c    3.0000E-04
92236.09c    8.0000E-05
92238.09c    2.0000E-02
93237.09c    7.1000E-06
94238.09c    1.7000E-06
94239.09c    1.2000E-04
94240.09c    3.8000E-05
94241.09c    2.1000E-05
94242.09c    5.3000E-06
95241.09c    4.2000E-07
54131.09c    1.4000E-05
54135.09c    8.0000E-09
63153.09c    2.8000E-06
62149.09c    9.0000E-08
45103.09c    1.8000E-05
60143.09c    2.5000E-05
55133.09c    3.5000E-05
64155.09c    8.4000E-10
43099.09c    3.2000E-05
42095.09c    3.2000E-05
61147.09c    6.4000E-06
62150.09c    7.5000E-06
62151.09c    4.1000E-07
62152.09c    3.2000E-06
 8016.09c    4.5100E-02
 


% --- Low Pu-content (GTUBE.9%) MOX fuel:

mat MOX1     6.702700E-02
92234.09c    4.3391E-07
92235.09c    4.9682E-05
92236.09c    8.6782E-07
92238.09c    2.1644E-02
94238.09c    5.4861E-06
94239.09c    4.3144E-04
94240.09c    1.3387E-04
94241.09c    4.8185E-05
94242.09c    1.8859E-05
95241.09c    9.1090E-06
 8016.09c    4.4685E-02

% --- Medium Pu-content (4.4%) MOX fuel:

mat MOX2     6.702100E-02
92234.09c    4.2718E-07
92235.09c    4.8271E-05
92236.09c    8.5435E-07
92238.09c    2.1309E-02
94238.09c    8.1476E-06
94239.09c    6.5555E-04
94240.09c    2.0151E-04
94241.09c    7.4065E-05
94242.09c    2.7751E-05
95241.09c    1.4626E-05
 8016.09c    4.4681E-02

% --- High Pu-content (5.6%) MOX fuel:

mat MOX3     6.701800E-02
92234.09c    4.2175E-07
92235.09c    4.9766E-05
92236.09c    8.4350E-07
92238.09c    2.1037E-02
94238.09c    1.0815E-05
94239.09c    8.3501E-04
94240.09c    2.5798E-04
94241.09c    9.4430E-05
94242.09c    3.6112E-05
95241.09c    1.7374E-05
 8016.09c    4.4678E-02

% --- VIRTUAL MATERIALS --- 

mat VIRT_MAT_MOX_92234 1.0 92234.09c 1.0
mat VIRT_MAT_MOX_92235 1.0 92235.09c 1.0
mat VIRT_MAT_MOX_92236 1.0 92236.09c 1.0
mat VIRT_MAT_MOX_92238 1.0 92238.09c 1.0
mat VIRT_MAT_MOX_94238 1.0 94238.09c 1.0
mat VIRT_MAT_MOX_94239 1.0 94239.09c 1.0
mat VIRT_MAT_MOX_94240 1.0 94240.09c 1.0
mat VIRT_MAT_MOX_94241 1.0 94241.09c 1.0
mat VIRT_MAT_MOX_94242 1.0 94242.09c 1.0
mat VIRT_MAT_MOX_95241 1.0 95241.09c 1.0
mat VIRT_MAT_MOX_8016  1.0 8016..09c 1.0






% --- Zircaloy in cladding and guide tube:

mat CLAD      4.004642E-02
40000.06c    3.9550E-02
26000.06c    1.3830E-04
24000.06c    7.0720E-05
 8016.06c    2.8740E-04


% --- Water with 550 ppm boron:

mat WATER    7.088200E-02  moder lwtr 1001
 1001.06c    4.7240E-02
 8016.06c    2.3620E-02
 5010.06c    4.3210E-06
 5011.06c    1.7390E-05


% --- Thermal scattering data for light water:

therm lwtr lwj3.11t

% --- Cross section library file path:

set acelib "/xs/sss_endfb7u.xsdata"   % --- Cross section library file path:

set declib "/usr/local/SERPENT/endf-b-vi-8_decay.dat" % Decay and fission yield libraries:
set nfylib "/usr/local/SERPENT/endf-b-vi-8_nfpy.dat"

% ------------------------------------------------------------

% --- Parameters ("param block"):

% --- Periodic boundary condition:

set bc 2 2 1

% --- Neutron population and criticality cycles:

set pop 20000 500 20

% ------------------------------------------------------------

% --- Geometry ("geom block"):

% --- UOX Pin ("unit 1"):

pin  UO2_P
UO2    0.41260
CLAD    0.47400
WATER

% --- Guide tube ("unit GTUBE"):

pin  GTUBE
WATER  0.57100
CLAD   0.61300
WATER

% --- MOX Pins ("units 3-5"):

pin MOX1P
MOX1   0.41260
CLAD   0.47400
WATER

pin MOX2P
MOX2   0.41260
CLAD   0.47400
WATER

pin MOX3P
MOX3   0.41260
CLAD   0.47400
WATER

% --- fuel-assembly :

surf  FA_EXT  sqc  0.0 0.0 10.727
surf TAF pz 190
surf BAF pz -190
surf FA_TOP pz 200
surf FA_BTM pz -200

cell UO2_FA_001  UO2_FA  fill U02_FA_LAT   -FA_EXT -TAF BAF
cell UO2_FA_002  UO2_FA  WATER   FA_EXT -FA_TOP FA_BTM
cell UO2_FA_003  UO2_FA  WATER  -FA_EXT -FA_TOP TAF
cell UO2_FA_004  UO2_FA  WATER  -FA_EXT FA_BTM -BAF

cell MOX_FA_001  MOX_FA  fill MOX_FA_LAT   -FA_EXT -TAF BAF
cell MOX_FA_002  MOX_FA  WATER   FA_EXT -FA_TOP FA_BTM
cell MOX_FA_003  MOX_FA  WATER  -FA_EXT -FA_TOP TAF
cell MOX_FA_004  MOX_FA  WATER  -FA_EXT FA_BTM -BAF

% --- Core lattice ("global unit 0"):

surf  REA_EXT  sqc  0.0 0.0 21.612

cell REA_001   0  fill REA_LAT -REA_EXT -FA_TOP FA_BTM
cell REA_002   0  outside     REA_EXT -FA_TOP FA_BTM
cell REA_003 0 outside FA_TOP
cell REA_004 0 outside -FA_BTM

% ------------------------------------------------------------

% --- Lattices ("array block"):

% --- UOX pin lattice:

lat U02_FA_LAT  1  0.0 0.0 17 17  1.262

UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P 
UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P 
UO2_P UO2_P UO2_P UO2_P UO2_P GTUBE UO2_P UO2_P GTUBE UO2_P UO2_P GTUBE UO2_P UO2_P UO2_P UO2_P UO2_P 
UO2_P UO2_P UO2_P GTUBE UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P GTUBE UO2_P UO2_P UO2_P 
UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P 
UO2_P UO2_P GTUBE UO2_P UO2_P GTUBE UO2_P UO2_P GTUBE UO2_P UO2_P GTUBE UO2_P UO2_P GTUBE UO2_P UO2_P 
UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P 
UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P 
UO2_P UO2_P GTUBE UO2_P UO2_P GTUBE UO2_P UO2_P GTUBE UO2_P UO2_P GTUBE UO2_P UO2_P GTUBE UO2_P UO2_P 
UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P 
UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P 
UO2_P UO2_P GTUBE UO2_P UO2_P GTUBE UO2_P UO2_P GTUBE UO2_P UO2_P GTUBE UO2_P UO2_P GTUBE UO2_P UO2_P 
UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P 
UO2_P UO2_P UO2_P GTUBE UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P GTUBE UO2_P UO2_P UO2_P 
UO2_P UO2_P UO2_P UO2_P UO2_P GTUBE UO2_P UO2_P GTUBE UO2_P UO2_P GTUBE UO2_P UO2_P UO2_P UO2_P UO2_P 
UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P 
UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P UO2_P 

% --- MOX pin lattice:

lat MOX_FA_LAT  1  0.0 0.0 17 17  1.262

MOX1P MOX1P MOX1P MOX1P MOX1P MOX1P MOX1P MOX1P MOX1P MOX1P MOX1P MOX1P MOX1P MOX1P MOX1P MOX1P MOX1P
MOX1P MOX2P MOX2P MOX2P MOX2P MOX2P MOX2P MOX2P MOX2P MOX2P MOX2P MOX2P MOX2P MOX2P MOX2P MOX2P MOX1P
MOX1P MOX2P MOX2P MOX2P MOX2P GTUBE MOX2P MOX2P GTUBE MOX2P MOX2P GTUBE MOX2P MOX2P MOX2P MOX2P MOX1P
MOX1P MOX2P MOX2P GTUBE MOX2P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX2P GTUBE MOX2P MOX2P MOX1P
MOX1P MOX2P MOX2P MOX2P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX2P MOX2P MOX2P MOX1P
MOX1P MOX2P GTUBE MOX3P MOX3P GTUBE MOX3P MOX3P GTUBE MOX3P MOX3P GTUBE MOX3P MOX3P GTUBE MOX2P MOX1P
MOX1P MOX2P MOX2P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX2P MOX2P MOX1P
MOX1P MOX2P MOX2P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX2P MOX2P MOX1P
MOX1P MOX2P GTUBE MOX3P MOX3P GTUBE MOX3P MOX3P GTUBE MOX3P MOX3P GTUBE MOX3P MOX3P GTUBE MOX2P MOX1P
MOX1P MOX2P MOX2P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX2P MOX2P MOX1P
MOX1P MOX2P MOX2P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX2P MOX2P MOX1P
MOX1P MOX2P GTUBE MOX3P MOX3P GTUBE MOX3P MOX3P GTUBE MOX3P MOX3P GTUBE MOX3P MOX3P GTUBE MOX2P MOX1P
MOX1P MOX2P MOX2P MOX2P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX2P MOX2P MOX2P MOX1P
MOX1P MOX2P MOX2P GTUBE MOX2P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX3P MOX2P GTUBE MOX2P MOX2P MOX1P
MOX1P MOX2P MOX2P MOX2P MOX2P GTUBE MOX2P MOX2P GTUBE MOX2P MOX2P GTUBE MOX2P MOX2P MOX2P MOX2P MOX1P
MOX1P MOX2P MOX2P MOX2P MOX2P MOX2P MOX2P MOX2P MOX2P MOX2P MOX2P MOX2P MOX2P MOX2P MOX2P MOX2P MOX1P
MOX1P MOX1P MOX1P MOX1P MOX1P MOX1P MOX1P MOX1P MOX1P MOX1P MOX1P MOX1P MOX1P MOX1P MOX1P MOX1P MOX1P

% --- Core lattice:

lat REA_LAT  1  0.0 0.0 3 3  21.612
UO2_FA UO2_FA UO2_FA
UO2_FA MOX_FA UO2_FA
UO2_FA UO2_FA UO2_FA

% ------------------------------------------------------------

% --- Plotters ("plot block"):

% --- Geometry and mesh plots:

plot 3 500 500
plot 2 100 1000
plot 1 100 1000

% ------------------------------------------------------------

% --- Detector energy grid (uniform lethargy):

ene egrid_500 3 500 1E-12 20.0

% --- DETECTORS --- %

det flux_CORE dx -21.612 21.612 8 dy -21.612 21.612 8 dz -200 200 50
det flux_MAT dm UO2 dm MOX1 dm MOX2 dm MOX3 dm WATER dm CLAD dx -21.612 21.612 8 dy -21.612 21.612 8 dz -200 200 50
det flux_MOX_FA dx -10.727 10.727 17 dy -10.727 10.727 17 dz -200 200 20

det power_CORE dr -8 void dx -21.612 21.612 8 dy -21.612 21.612 8 dz -200 200 50
det power_MOX_FA dr -8 void dx -10.727 10.727 17 dy -10.727 10.727 17 dz -200 200 20

det spectra_MATERIALS de egrid_500 dm UO2 dm MOX1 dm MOX2 dm MOX3 dm WATER dm CLAD dz -200 200 40 dx -21.612 21.612 4 dy -21.612 21.612 4

det xsf_MOX1 dm MOX1 dz -190 190 20
	dr 18 VIRT_MAT_MOX_92235
	dr 18 VIRT_MAT_MOX_92238
	dr 18 VIRT_MAT_MOX_94239

det xsf_MOX2 dm MOX2 dz -190 190 20
	dr 18 VIRT_MAT_MOX_92235
	dr 18 VIRT_MAT_MOX_92238
	dr 18 VIRT_MAT_MOX_94239

det xsf_MOX3 dm MOX3 dz -190 190 20
	dr 18 VIRT_MAT_MOX_92235
	dr 18 VIRT_MAT_MOX_92238
	dr 18 VIRT_MAT_MOX_94239

det xsf_UO2 dm UO2 dz -190 190 20
	dr 18 VIRT_MAT_MOX_92235
	dr 18 VIRT_MAT_MOX_92238
	dr 18 VIRT_MAT_MOX_94239
	
det test_TOT_POWER dr -8 void du 0